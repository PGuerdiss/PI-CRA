<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>PinkFoxStore</title>
    
    <link rel="stylesheet" href="css/index.css">       

    </style>
</head>
<body>
    <header>
        <nav class="nav-bar">
              <div class="logo">
                <a href="index.html"><img src="img/Logo(CRA).png" alt="logo"></a>
              </div>

              
        </nav>
    </header>
    <div  class="texto-site">
        <H1>CRA: Projeto da FATEC Diadema</H1>
        <p>Olá a todos!

            É com grande entusiasmo que apresentamos a vocês o CRA - Child Rescue Alert , um projeto notável desenvolvido pelos alunos da FATEC Diadema. Nosso objetivo é simples, mas vital: criar uma plataforma dedicada ao anúncio de desaparecimentos de crianças, a fim de aumentar suas chances de retorno seguro às suas famílias amorosas.
            
            O CRA é mais do que apenas um site; é um farol de esperança em momentos de desespero. Ao compartilhar informações sobre crianças/adolescentes desaparecidas e encorajar uma ampla divulgação, estamos unindo forças para trazer conforto e alívio às famílias que enfrentam situações angustiantes.
            
            Cada clique, cada compartilhamento, cada ato de solidariedade nos aproxima mais do nosso objetivo comum: reunir famílias e trazer de volta sorrisos aos rostos de crianças perdidas. Convidamos calorosamente a todos a visitarem o CRA, a conhecerem as histórias das crianças desaparecidas e a se tornarem parte desta missão de amor e compaixão.
            
            Juntos, podemos fazer a diferença. Juntos, podemos trazer esperança e segurança para aqueles que mais precisam.
            
            Visite-nos em <a href="index.html">CRA.com</a> e junte-se a nós nesta jornada de solidariedade e esperança.
            
            Agradecemos imensamente por seu apoio contínuo.
        </p>
    </div>
    <script>
        // Função para verificar se o usuário está logado
        async function mostrarUsuarioLogado() {
            const response = await fetch('/api/usuarioLogado');
            const data = await response.json();

            if (data.logado) {
                document.getElementById('profile-pic').src = data.foto_perfil;
                document.getElementById('profile-pic').style.display = 'block';
                document.getElementById('user-name').innerText = data.nome;
                document.getElementById('user-name').style.display = 'block';

                document.getElementById('postagem').style.display = 'inline';
                document.getElementById('logout').style.display = 'inline';

                document.getElementById('cadastro').style.display = 'none';
                document.getElementById('login').style.display = 'none';
            }
        }

        // Função para fazer logout
        async function logout() {
            const response = await fetch('/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const result = await response.json();
            if (result.success) {
                window.location.href = '/';  // Redireciona para a página inicial após logout
            } else {
                alert('Erro ao fazer logout.');
            }
        }

        // Associa a função ao clique no botão "Sair"
        document.getElementById('logout').addEventListener('click', logout);

        // Chama as funções ao carregar a página
        window.onload = async () => {
            await carregarItens();
            await mostrarUsuarioLogado();
        };
    </script>

</body>
</html>